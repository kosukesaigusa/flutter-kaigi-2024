---
marp: true
theme: base
_class: lead
paginate: true
backgroundColor: fff
backgroundImage: url('https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background.svg')
---

<style scoped>h2 {font-size: 36px; } h3 {font-size: 42px; }</style>

![bg left:40% 80%](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/kosukesaigusa.jpg)

## **FlutterKaigi 2024**

### ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã€Omiaiã€ã®<br>Flutterã¸ã®ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã®æŒ‘æˆ¦

Kosuke Saigusaï¼ˆæ ªå¼ä¼šç¤¾ Omiaiï¼‰

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã„ãã¤ã‹è³ªå•ã•ã›ã¦ãã ã•ã„ï¼

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# Flutter ã§ã®é–‹ç™ºãŒå¥½ãï¼ ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# Flutter ã§æ–°è¦ã‚¢ãƒ—ãƒªã®ç«‹ã¡ä¸Šã’ã‚’ã—ãŸã“ã¨ãŒã‚ã‚‹ ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# Flutter ã§æ—¢å­˜ã‚¢ãƒ—ãƒªã‚’ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã—ãŸã“ã¨ãŒã‚ã‚‹ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# çš†ã•ã‚“ã® Flutter ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# é–‹ç™ºä½“é¨“ã‚„é–‹ç™ºç”Ÿç”£æ€§ã«æ¦‚ã­æº€è¶³ã—ã¦ã„ã‚‹ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯æ¦‚ã­é–‹ç™ºã—ã‚„ã™ã„ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# è² å‚µãŒå°‘ãªãé–‹ç™ºã—ã‚„ã™ã„ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãƒ†ã‚¹ãƒˆã‚’ååˆ†ã«æ›¸ã‘ã¦ã„ã‚‹ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# æ–°è¦å‚ç”»ãƒ¡ãƒ³ãƒãƒ¼ãŒæ´»èºã—ã‚„ã™ã„ğŸ™‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# æœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚´ãƒ¼ãƒ«

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# æœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚´ãƒ¼ãƒ«

<div class="center-goal-container">
  <h2>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ä¸­å¿ƒã«<br>å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã® Flutter ã¸ã®ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã‚’<br>æˆåŠŸã«å°ãã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’è€ƒãˆã‚‹</h2>
  <p class="note">â€» ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã€æ¡ç”¨ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãªã©ã‚‚å«ã‚ã¦ã€<br>åºƒç¾©ã«ã€Œã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ã¨è¡¨ç¾ã—ã¦ã„ã¾ã™</p>
</div>

---

# è‡ªå·±ç´¹ä»‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/self-introduction.svg)

- Kosuke Saigusa (@kosukesaigusa)
- æ ªå¼ä¼šç¤¾ Omiai Flutter ãƒ†ãƒƒã‚¯ãƒªãƒ¼ãƒ‰
- FlutterNinjas 2024, FlutterKaigi 2023 ç­‰ã§ç™»å£‡
- FlutterGakkai, æ±äº¬ Flutter ãƒãƒƒã‚«ã‚½ãƒ³é‹å–¶

---

# Omiai ã«ã¤ã„ã¦

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/omiai.png)

---

# æ˜¨ä»Šã®ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã¨å¸‚å ´ã«ã¤ã„ã¦

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/matching-service.png)

---

# ã‚¨ãƒ‹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã«ã¤ã„ã¦

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/enito-01.svg)

---

# ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹çµŒå–¶ä½“åˆ¶

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/enito-02.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãªãœã€Omiaiã€ã¯ Flutter ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ãªãœã€Omiaiã€ã¯ Flutter ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

## ğŸ’¬ èƒŒæ™¯

- 2012 å¹´ã‹ã‚‰é•·å¹´é‹å–¶ã•ã‚Œã¦ããŸã‚µãƒ¼ãƒ“ã‚¹
- iOSãƒ»Android (, Web) ã®å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®å¤ã„ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ãŒæŠ±ãˆã‚‹å¤šãã®æŠ€è¡“çš„è² å‚µã‚„ä»•æ§˜å·®ç•°
- ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã®è§£æ¶ˆãƒ»ä»•æ§˜å¤‰æ›´ã‚‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªãŒç†ç”±ã§é€²ã‚ã¥ã‚‰ã„

## âœ… ç›®æ¨™

- Flutter ã¸ã®ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã«ã‚ˆã‚‹å˜ä¸€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹åŒ–ã¨æŠ€è¡“çš„è² å‚µã®è¿”æ¸ˆ
- ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ä¸­ã‚‚æ©Ÿèƒ½è¿½åŠ ã¯æ­¢ã‚ãªã„
- toC ã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚ã‚‹ã¹ãç´ æ—©ããƒ»ç´°ã‹ã„é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã§ã®é–‹ç™ºãƒ»æ¤œè¨¼ã‚’å®Ÿç¾ã™ã‚‹

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã©ã®ã‚ˆã†ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ã©ã®ã‚ˆã†ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

## âœ… Flutter çµŒé¨“ã®ç„¡ã„ãƒ¡ãƒ³ãƒãƒ¼ã‚„æ–°è¦å‚ç”»ãƒ¡ãƒ³ãƒãƒ¼ãŒæ—©æœŸã«æ´»èºã§ãã‚‹

- Flutter çµŒé¨“è€…ã‚¼ãƒ­ãƒ»æ¥­å‹™å§”è¨—ä¸­å¿ƒçµ„ç¹”ã‹ã‚‰æ­£ç¤¾å“¡æ¡ç”¨ã«ã‚ˆã‚‹ãƒãƒ¼ãƒ ã®æ‹¡å¤§ã¸

## âœ… è² å‚µåŒ–ã‚’ç¹°ã‚Šè¿”ã•ãšã€é«˜ã„é–‹ç™ºç”Ÿç”£æ€§ã‚’ç¶­æŒã—ç¶šã‘ã‚‹

- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€CIã€ãƒ†ã‚¹ãƒˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã§å¤šãã®å·¥å¤«

## âœ… ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ä¸­ã‚‚æ©Ÿèƒ½è¿½åŠ ã¯æ­¢ã‚ãªã„

- Add-to-App ã‚’åˆ©ç”¨ã—ã¦æ—¢å­˜ã‚¢ãƒ—ãƒªã‹ã‚‰ Flutter ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å‘¼ã³å‡ºã™
- ä¸»è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‹ã‚‰é †ã«ã€æ–°ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãªãŒã‚‰ Flutter ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹

---

# è¦ä»¶ï¼ˆä¸€éƒ¨æŠœç²‹ï¼‰

## âœ… é–‹ç™ºã‚¹ãƒ”ãƒ¼ãƒ‰

- ã€‡ã€‡ ã‚µã‚¤ã‚ºã®ã€Œå…¸å‹çš„ãªå®Ÿè£…ã‚¿ã‚¹ã‚¯ã€ã¯ã€N æ—¥ä»¥å†…ã«å®Ÿè£…ã‚’å®Œäº†ã—ã€QA Ready ã®çŠ¶æ…‹ã«ãªã‚‹
- æ–°è¦å‚ç”»ãƒ¡ãƒ³ãƒãƒ¼ãŒ N æ—¥ä»¥å†…ã«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç†è§£ã§ãã€ã‚¿ã‚¹ã‚¯ã«ç€æ‰‹ã§ãã‚‹
- é–‹ç™ºã‚¿ã‚¹ã‚¯ã®æ ¹æ‹ ã‚’ã‚‚ã£ãŸè¦‹ç©ã‚‚ã‚ŠãŒå¯èƒ½ã«ãªã‚‹

## âœ… å“è³ª

- è¦ç´„ã«å¾“ã£ãŸå“è³ªã®é«˜ã„ã‚³ãƒ¼ãƒ‰ã‚’ãƒãƒ¼ãƒ å…¨å“¡ã§æ›¸ãã“ã¨ãŒã§ãã‚‹
- æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯å±¤ã¨ã€ãã‚Œã‚ˆã‚ŠæŠ½è±¡çš„ãªå±¤å…¨ã¦ã§ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒã‚«ãƒãƒ¬ãƒƒã‚¸ 100% ã§è¨˜è¿°ã§ãã‚‹
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒã€Œå®Ÿè¡Œå¯èƒ½ãªä»•æ§˜æ›¸ã€ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹

---

# é™¥ã‚ŠãŒã¡ãªç¾å®Ÿã¨ç†æƒ³

<div class="two-columns">

<div>

## â›” é™¥ã‚ŠãŒã¡ãªç¾å®Ÿ

- æ¬¡ç¬¬ã«è² å‚µãŒè“„ç©ã—ã€ãã®æ‚ªå½±éŸ¿ãŒåºƒãæ³¢åŠã™ã‚‹
- æ—¢å­˜å®Ÿè£…ã®å½±éŸ¿ç®‡æ‰€ã‚’éšˆãªãæ¢ã•ãªã„ã¨ã€ã‚¿ã‚¹ã‚¯ã®å®Ÿè£…ãŒã§ããªã„
- å®Ÿè£…ã®æ­£ã—ã•ã‚’åˆ¤æ–­ã™ã‚‹åŸºæº–ãŒæ›–æ˜§ã§ã€è¿·ã†æ™‚é–“ãŒé•·ã„
- ã‚³ãƒ¼ãƒ‰ã®å“è³ªç¶­æŒãŒç†Ÿç·´ãƒ¡ãƒ³ãƒãƒ¼ã®å±äººçš„ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ã«é ¼ã£ã¦ã„ã‚‹

</div>

<div>

## âœ… ç†æƒ³

- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šè² å‚µåŒ–ã‚’æœªç„¶ã«é˜²ãã€å“è³ªãŒç¶­æŒã•ã‚Œã‚‹
- å½±éŸ¿ç¯„å›²ãŒæ˜ç¢ºã§ã€æœ¬è³ªçš„ãªå®Ÿè£…ã«é›†ä¸­ã§ãã‚‹
- å®Ÿè£…ã®æ­£ã—ã•ã‚’åˆ¤æ–­ã™ã‚‹åŸºæº–ãŒæ˜ç¢ºã§ã€è¿·ã‚ãšé–‹ç™ºã§ãã‚‹
- ã‚³ãƒ¼ãƒ‰ã®å“è³ªç¶­æŒãŒä»•çµ„ã¿ã¨ã—ã¦ç¢ºç«‹ã•ã‚Œã€èª°ã§ã‚‚æ´»èºã§ãã‚‹

</div>

</div>

---

# ç›®æ¨™ã‚’é”æˆã™ã‚‹ãŸã‚ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

## âœ… ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹å“è³ªæ‹…ä¿

- èª¤ã£ãŸå®Ÿè£…ã‚’é˜²ãã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã‚’ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§å®Ÿç¾ã™ã‚‹
- æ˜ç¢ºãªå¢ƒç•Œã¨ä¾å­˜é–¢ä¿‚ã®åˆ¶å¾¡ã«ã‚ˆã‚Šä¿å®ˆæ€§ã‚’é«˜ã‚ã‚‹
  1. ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã«ã‚ˆã‚‹è²¬å‹™ã®åˆ†é›¢
  2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ä¾å­˜é–¢ä¿‚ã®æ˜ç¢ºåŒ–ã¨åˆ¶å¾¡
  3. Flutter ã®ä¸–ç•Œãƒ»Dart ã®ä¸–ç•Œã®æ˜ç¢ºãªåŒºåˆ¥
  4. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã¨ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¢ãƒ—ãƒªã®å¢ƒç•Œã®æ˜ç¢ºãªåŒºåˆ¥
- ã€Œæ­£ã—ã„å®Ÿè£…ã€ãŒè‡ªç„¶ã¨å°ã‹ã‚Œã‚‹æ§‹é€ ã‚’ç›®æŒ‡ã™

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§

å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«è¨±ã•ã‚Œã‚‹ç›´æ¥çš„ãªä¾å­˜ã¯çŸ¢å°ã®å…ˆã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ã«é™å®šã•ã‚Œã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-all.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (app)

Flutter ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã®å®Ÿè£…ã€ã¾ãŸã€ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã¨ã—ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å®Ÿè£…ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-app.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (base_ui)

å…±é€šåˆ©ç”¨ã•ã‚Œã‚‹ ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã€è‰²ã€ç”»åƒãªã©ã®åŸºç¤çš„ãƒ»åŸå§‹çš„ãª UI éƒ¨å“ã€ãã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ãŸå…±é€šã® UI éƒ¨å“ãªã©ã‚’å®Ÿè£…ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-base-ui.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (domain)

æ¥­å‹™çŸ¥è­˜ã‚„æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-domain.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (repository)

ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆè‡ªç¤¾ã® API ã‚µãƒ¼ãƒãƒ¼ã‚„ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãªã©ï¼‰ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’è¨˜è¿°ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-repository.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (system)

3rd ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ„ãƒ¼ãƒ«ã‚’ãƒ©ãƒƒãƒ—ã—ã¦åŸºç¤çš„ãªå®Ÿè£…ã‚’è¨˜è¿°ã™ã‚‹ï¼ˆä¾‹ï¼šHTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€Shared Preferences, Firebase Analytics ãªã©ï¼‰ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-system.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (dependency_provider)

Unimplemented ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ã¿ã‚’å®šç¾©ã™ã‚‹ã€‚ã‚¢ãƒ—ãƒªå®Ÿè¡Œæ™‚ã€å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæ™‚ã«æŒ¯ã‚‹èˆã„ã‚’ä¸Šæ›¸ãã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-dependency-provider.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Ÿè£…å†…å®¹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# base_ui

å…±é€šåˆ©ç”¨ã•ã‚Œã‚‹ ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã€è‰²ã€ç”»åƒãªã©ã®åŸºç¤çš„ãƒ»åŸå§‹çš„ãª UI éƒ¨å“ã€ãã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ãŸå…±é€šã® UI éƒ¨å“ãªã©ã‚’å®Ÿè£…ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-base-ui.svg)

---

# base_ui ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: direct
- ä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ï¼š
  - extended_image
  - flutter_svg
  - flutter_gen

---

# base_ui ã®å®Ÿè£…ä¾‹

- Figma ã¨åŒåã§å®šç¾©ã•ã‚ŒãŸ TextStyle, Color ãªã©ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰

```dart
/// ã‚¢ãƒ—ãƒªã§ä½¿ç”¨ã™ã‚‹è‰²ä¸€è¦§ã€‚
abstract interface class AppColor {
  /// ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã® 01 ã®èµ¤è‰²ã€‚
  static const Color primary01 = Color(0xFFFF3159);

  /// ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã® 02 ã®é’è‰²ã€‚
  static const Color primary02 = Color(0xFF3F9AD1);

  /** çœç•¥ */

  /// ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒ¼ã® 01 ã®ãƒ”ãƒ³ã‚¯è‰²ã€‚
  static const Color secondary01 = Color(0xFFFE8D8B);

  /** çœç•¥ */
}
```

---

# base_ui ã®å®Ÿè£…ä¾‹

- ãƒœã‚¿ãƒ³ã€ç”»åƒã€AppBarã€TextField ãªã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãã‚Œã‚‰ã®çµ„ã¿åˆã‚ã›
- Figma ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®šç¾©ã¨ä¸€è‡´ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```dart
/// ã‚¢ãƒ—ãƒªå†…ã§å…±é€šã§ç”¨ã„ã‚‰ã‚Œã‚‹ [ElevatedButton].
class CommonElevatedButton extends StatelessWidget {
  /// S ã‚µã‚¤ã‚ºã® [CommonElevatedButton] ã‚’ç”Ÿæˆã™ã‚‹ã€‚
  const CommonElevatedButton.s({/** çœç•¥ */});

  /// S ã‚µã‚¤ã‚ºã®ã‚¢ã‚¤ã‚³ãƒ³ä»˜ãã® [CommonElevatedButton] ã‚’ç”Ÿæˆã™ã‚‹ã€‚
  const CommonElevatedButton.sWithIcon({/** çœç•¥ */});

  /** çœç•¥ */

  @override
  Widget build(BuildContext context) {/** çœç•¥ */}
}
```

---

# system

3rd ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ„ãƒ¼ãƒ«ã‚’ãƒ©ãƒƒãƒ—ã—ã¦åŸºç¤çš„ãªå®Ÿè£…ã‚’è¨˜è¿°ã™ã‚‹ã€‚å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ä¾å­˜ã‚’é–‰ã˜è¾¼ã‚ã¦ã€å¤–éƒ¨ã«è¡¨å‡ºã•ã›ãªã„ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-system.svg)

---

# system ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: transitive
- ä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ï¼š
  - dio
  - firebase_analytics
  - shared_preferences

---

# system ã®å®Ÿè£…ä¾‹

- `HTTPClient` ã‚¯ãƒ©ã‚¹ã®ä¾‹ï¼ˆä¸€éƒ¨çœç•¥ãƒ»ç°¡ç•¥åŒ–ï¼‰
- å†…éƒ¨ã§ dio ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ä¾å­˜

```dart
class HttpClient {
  HttpClient({required String baseUrl, Map<String, dynamic>? headers})
      : _client = DioHttpClient(baseUrl: baseUrl, headers: headers);

  Future<HttpResponse<dynamic>> request({
    required HttpMethod method,
    required String path,
    Map<String, dynamic>? queryParameters,
    Object? data,
    Map<String, dynamic>? headers,
  }) async {
    /** çœç•¥ */
  }
}
```

---

# system ã®å®Ÿè£…ä¾‹

- `HTTPClient` ã‚¯ãƒ©ã‚¹ãŒè¿”ã™ `HttpResponse` ã‚¯ãƒ©ã‚¹ã®ä¾‹ï¼ˆä¸€éƒ¨çœç•¥ãƒ»ç°¡ç•¥åŒ–ï¼‰
- Result å‹ã®ã‚ˆã†ãªå½¢ã§ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æˆåŠŸãƒ»å¤±æ•—ã‚’è¡¨ç¾

```dart
@freezed
sealed class HttpResponse<T> with _$HttpResponse<T> {
  const factory HttpResponse.success({
    required T data,
    required Map<String, List<String>> headers,
  }) = SuccessHttpResponse<T>;

  const factory HttpResponse.failure({
    T? data,
    required Object e,
    required ErrorStatus status,
  }) = FailureHttpResponse<T>;
}
```

---

# system ã®å®Ÿè£…ä¾‹

- 3rd ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ä¾å­˜ã¯ä¾‹å¤–ã‚‚å«ã‚ã¦å¤–éƒ¨ã«ã¯è¡¨å‡ºã•ã›ãªã„
- ä¸è¦ãªæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯å¡ã„ã§ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹

```dart
class HttpClient {
  /** çœç•¥ */

  Future<HttpResponse<dynamic>> request({/** çœç•¥ */}) async {
    try {
      final response = await _client.request<dynamic>(/** çœç•¥ */);
      return HttpResponse.success(/** çœç•¥ */);
    } on DioException catch (e) {
      /** çœç•¥ */
      return HttpResponse.failure(/** çœç•¥ */);
    }
  }
}
```

---

# repository

ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆè‡ªç¤¾ã® API ã‚µãƒ¼ãƒãƒ¼ã‚„ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãªã©ï¼‰ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’è¨˜è¿°ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-repository.svg)

---

# repository ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: transitive
- ä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ï¼š
  - system
  - riverpod

---

# repository ã®å®Ÿè£…ä¾‹

- `HttpResponse` ã®æˆåŠŸãƒ»å¤±æ•—ã‚’ switch æ–‡ã§åˆ†å²ã—ã¦ã€`RepositoryResult` ã‚’è¿”ã™ã€‚

```dart
class AccountDetailRepository {
  /** çœç•¥ */

  Future<RepositoryResult<AccountDetailDto>> fetchAccountDetail() async {
    final response = await _ref.read(omiaiHttpRequestHelperProvider).request(/** çœç•¥ */);
    switch (response) {
      case SuccessHttpResponse(:final data):
        final dto = AccountDetailDto.fromJson(data as Map<String, dynamic>);
        return RepositoryResult.success(dto);
      case FailureHttpResponse(/** çœç•¥ */):
        /** çœç•¥ */
        return RepositoryResult.failure(/** çœç•¥ */);
    }
  }
}
```

---

# repository ã®å®Ÿè£…ä¾‹

- Dto ã¨ã—ã¦ HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã™ã‚‹
- ä¸é©åˆ‡ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚„å‹ã‚’å¤‰æ›ã—ã¦ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã‚’æŒã¡è¾¼ã¾ãªã„

```dart
@freezed
class FooDto with _$FooDto {
  const factory FooDto({
    @JsonKey(name: 'inappropriate_field_name') required String someFieldName,
    @Default([]) List<String> things,
    @flexibleBoolConverter required bool isSomething,
    @flexibleDateTimeConverter required DateTime someDateTime,
  }) = _FooDto;

  factory FooDto.fromJson(Map<String, dynamic> json) => _$FooDtoFromJson(json);
}
```

---

# domain

æ¥­å‹™çŸ¥è­˜ã‚„æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-domain.svg)

---

# domain ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: transitive
- ä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ï¼š
  - repository
  - riverpod

---

# domain ã®å®Ÿè£…ä¾‹

- ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã«ãŠã‘ã‚‹ãŠç›¸æ‰‹ãƒ¡ãƒ³ãƒãƒ¼ã®æ¥­å‹™æ¦‚å¿µã®å®šç¾©ã®ä¾‹
- HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å¯¾å¿œã™ã‚‹ Dto ã‹ã‚‰ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç”Ÿæˆã™ã‚‹

```dart
@freezed
class Member with _$Member {
  const factory Member({
    /** çœç•¥ */
    required LogInStatus loginStatus,
  }) = _Member;

  factory Member.fromDto(MemberDto dto) => Member(
    /** çœç•¥ */
    loginStatus: LogInStatus.fromDateTime(dto.lastAccessedAt),
  );
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- ãŠç›¸æ‰‹ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å®šç¾©ã®ä¾‹
- æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ã¨ã„ã†äº‹å®Ÿã‹ã‚‰ã€ãƒ­ã‚°ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆç›´è¿‘ã©ã®ãã‚‰ã„ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‹ï¼‰ã¨ã„ã†æ¥­å‹™æ¦‚å¿µã‚’è¨ˆç®—ã™ã‚‹

```dart
enum LogInStatus {
  active,

  recent,

  inactive,
  ;

  factory LogInStatus.fromDateTime(DateTime lastAccessedAt) {/** çœç•¥ */}
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- ãŠç›¸æ‰‹ãƒ¡ãƒ³ãƒãƒ¼ã®è©³ç´°ã‚’å–å¾—ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã®ä¾‹
- riverpod ã®é–¢æ•°ã§å–å¾—å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹
- repository ã«ã‚ˆã‚‹å–å¾—çµæœã‚’ switch æ–‡ã§åˆ†å²ã—ã¦å‡¦ç†ã™ã‚‹

```dart
@riverpod
Future<Member> memberDetail(MemberDetailRef ref, {required int userId}) async {
  final result = await ref.read(memberRepositoryProvider).fetchMember(userId);
  switch (result) {
    case SuccessRepositoryResult(:final data):
      return Member.fromDto(data);
    case FailureRepositoryResult(/** çœç•¥ */):
      /** çœç•¥ */
  }
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°ã®çŠ¶æ…‹ç®¡ç†ï¼ˆå–å¾—ã¨æ›´æ–°ã‚’è¡Œã†ãƒ­ã‚¸ãƒƒã‚¯ï¼‰ã®ä¾‹
- riverpod ã®ã‚¯ãƒ©ã‚¹ (Notifier) ã§çŠ¶æ…‹ç®¡ç†ã‚’è¨˜è¿°ã™ã‚‹

```dart
@Riverpod(keepAlive: true)
class AccountDetailNotifier extends _$AccountDetailNotifier {
  /** çœç•¥ */

  Future<void> updateAccountDetail() async {
    final result = await ref.read(accountDetailRepositoryProvider).updateAccountDetail(/** çœç•¥ */);
    switch (result) {
      case SuccessRepositoryResult(/** çœç•¥ */):
        /** çœç•¥ */
      case FailureRepositoryResult(/** çœç•¥ */):
        /** çœç•¥ */
    }
  }
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- ãŠç›¸æ‰‹ã«ã€Œã„ã„ã­ï¼ã€ã‚’é€ä¿¡ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆçŠ¶æ…‹ç®¡ç†ã‚’ä¼´ã‚ãªã„ï¼‰ã®ä¾‹
- æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã¨ã—ã¦å–ã‚Šæ‰±ã†ã¹ãä¾‹å¤–ã‚’å®šç¾©ã—ã€ã‚¹ãƒ­ãƒ¼ã™ã‚‹

```dart
class SendLikeUseCase {
  /** çœç•¥ */

  Future<void> invoke(/** çœç•¥ */) async {
    final result = await _ref.read(interestRepositoryProvider).sendInterest(/** çœç•¥ */);
    switch (result) {
        /** çœç•¥ */
      case FailureRepositoryResult(/** çœç•¥ */):
        /** çœç•¥ */
        throw InsufficientPointsToSendLikeException();
    }
  }
}

class InsufficientPointsToSendLikeException implements Exception {}
```

---

# app

Flutter ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã®å®Ÿè£…ã€ã¾ãŸã€ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã¨ã—ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å®Ÿè£…ã™ã‚‹ã€‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-app.svg)

---

# app ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: direct
- ä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ï¼š
  - domain
  - base_ui
  - auto_route
  - hooks_riverpod

---

# app ã®å®Ÿè£…ä¾‹

- auto_route ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã—ã¦ãƒ«ãƒ¼ãƒˆå®šç¾©

```dart
@RoutePage()
class MemberProfilePage extends StatelessWidget {
  const MemberProfilePage({
    @PathParam('userId') required this.userId,
    super.key,
  });

  static String resolvePath({required String userId}) => '/users/$userId';

  final int userId;

  @override
  Widget build(BuildContext context) {/** çœç•¥ */}
}
```

---

# app ã®å®Ÿè£…ä¾‹

- domain å±¤ã®å–å¾—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ `ref.watch` ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›®ã«ã™ã‚‹ä½“é¨“ã‚’å®Ÿè£…ã™ã‚‹

```dart
@override
Widget build(BuildContext context, WidgetRef ref) {
  // ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã€‚
  final memberAsyncValue = ref.watch(memberDetailProvider(userId: userId));
  return switch (memberAsyncValue) {
    AsyncData(value: final member) => /** çœç•¥ */,
    AsyncError() => /** çœç•¥ */,
    _ => /** çœç•¥ */,
  };
}
```

---

# app ã®å®Ÿè£…ä¾‹

- UI ã‚’é€šã˜ãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒˆãƒªã‚¬ãƒ¼ã« domain å±¤ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã™
- domain å±¤ã«å®šç¾©ã•ã‚ŒãŸä¾‹å¤–ã‚’å®Ÿç¾ã—ãŸã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«å¾“ã£ã¦å‡¦ç†ã™ã‚‹
- base_ui ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹

```dart
CommonFilledButton.sWithIcon(
  onPressed: () async {
    try {
      await _ref.read(sendLikeUseCaseProvider).invoke(/** çœç•¥ */);
    } on InsufficientPointsToSendLikeException {
      await _showErrorDialog(/** çœç•¥ */);
    }
    /** çœç•¥ */
  }
  text: 'ã„ã„ã­!',
  icon: OmiaiAssets.svg.like.svg(),
)
```

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-vertical-all.svg)

- app ã¯ Flutter ã®ä¸–ç•Œ
- domain ä»¥ä¸‹ã¯ä¸»ã«ã¯ Dart ã®ä¸–ç•Œ
- app, domain ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã®ä¸–ç•Œ
- repository ã¯ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¢ãƒ—ãƒªã¨ã®å¢ƒç•Œ

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-vertical-repository-system.svg)

<div class="content-left-60">

## repository - system é–“

- dio ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é€šã˜ã¦ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã†
- dio ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”±æ¥ã®ä¾‹å¤–ã¯è¡¨å‡ºã•ã›ãªã„
- Result å‹ã®ã‚ˆã†ãª `HttpResponse` å‹ã‚’è¿”ã™
- repository å±¤ã§ã¯ `switch` æ–‡ã«ã‚ˆã‚‹æˆåŠŸãƒ»å¤±æ•—ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¼·åˆ¶ã•ã‚Œã‚‹
- ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã¯ repository å±¤ã§å¸åã—åˆ‡ã‚‹

</div>

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-vertical-domain-repository.svg)

<div class="content-left-60">

## domain - repository é–“

- domain ã¯ repository ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿æ›¸ãã™ã‚‹
- repository ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ Result å‹ã®ã‚ˆã†ãª `RepositoryResult` å‹ã‚’è¿”ã™
- domain å±¤ã§ã¯ `switch` æ–‡ã«ã‚ˆã‚‹æˆåŠŸãƒ»å¤±æ•—ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¼·åˆ¶ã•ã‚Œã‚‹
- domain å±¤ã§ã¯ Dto ã‹ã‚‰æ¥­å‹™çŸ¥è­˜ã‚’è¡¨ã™ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç”Ÿæˆã™ã‚‹

</div>

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-vertical-app-domain.svg)

<div class="content-left-60">

## app - domain é–“

- app ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å®Ÿç¾ã®ãŸã‚ã« domain ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã€æ¥­å‹™æ¦‚å¿µã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿æ›¸ãã™ã‚‹
- æ¥­å‹™çŸ¥è­˜ã¨ã—ã¦å–ã‚Šæ‰±ã†ã¹ãä¾‹å¤–ã‚’æ•æ‰ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«åæ˜ ã™ã‚‹

</div>

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãªãœãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹ã®ã‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã“ã‚“ãªèª²é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼ŸğŸ¤”

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

# BAD: ã„ã‚ã„ã‚ãªå¢ƒç•Œã‚„ä¾å­˜ã®æ··åŒ

- æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ãŒã€HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã‚‚ã€UI ã«ã‚‚ä¾å­˜ã™ã‚‹
- ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¢ãƒ—ãƒªã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã®å¯†çµåˆ

â€» æ¥µç«¯ãªä¾‹ï¼š

```dart
import 'package:dio/dio.dart';
import 'package:flutter/material.dart';
import 'package:flutter_localizations/flutter_localizations.dart';

Future<void> someLogic(BuildContext context) async {
  try {
    final response = await someRepositoryMethod();
    ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(response.message)));
  } on DioException catch (e) {
    ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(AppLocalizations.of(context).error)));
  }
}
```

---

# BAD: æ„å›³ã—ãªã„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®ä¾å­˜ãŒè¡Œã‚ã‚Œã‚‹

- ä¾‹ãˆã° Presentation å±¤ãŒç›´æ¥ repository å±¤ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒç¦æ­¢ã•ã‚Œã¦ã„ã‚‹å ´åˆ
- ã‚³ãƒ¼ãƒ‰è¦ç´„ã§ç¸›ã‚Šã€PR ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§é˜²ãã—ã‹æ–¹æ³•ãŒãªã„

```dart
ElevatedButton(
  onPressed: () => ref.read(someRepositoryProvider).doSomething(),
  /** çœç•¥ */
);
```

---

# BAD: æ„å›³ã—ãªã„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®ä¾å­˜ãŒè¡Œã‚ã‚Œã‚‹

- é€šä¿¡å±¤ãŒã€æ¥­å‹™çŸ¥è­˜ã¨ã—ã¦ã®èªè¨¼æƒ…å ±ã«ä¾å­˜ã™ã‚‹
- é€šä¿¡å±¤ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’æ›¸ããŸã„ã®ã«ã€æ¥­å‹™çŸ¥è­˜ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- ã€Œã“ã®ä¾å­˜ãŒè¨±ã•ã‚Œã‚‹ãªã‚‰...ã€ã¨ã€å®Ÿè£…ã®æ­£ã—ã•ã‚’åˆ¤æ–­ã™ã‚‹åŸºæº–ãŒæ›–æ˜§ã«ãªã‚‹

```dart
class SomeRepository {
  /** çœç•¥ */

  Future<Something> fetchSomething({/** çœç•¥ */}) async {
    final accessToken = _ref.read(accessTokenProvider);
    final response = await _client.request(/** çœç•¥ */);
    /** çœç•¥ */
  }
}
```

---

# BAD: æ„å›³ã—ãªã„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®ä¾å­˜ãŒè¡Œã‚ã‚Œã‚‹

- æ±ç”¨çš„ãªå®Ÿè£…ã¨ã—ã¦ä½œã‚‰ã‚ŒãŸã‚‚ã®ãŒã€ã„ã¤ã®é–“ã«ã‹æ„å›³ã—ãªã„å¯¾è±¡ã«ä¾å­˜ã™ã‚‹ã‚ˆã†ã«ãªã‚‹

```dart
class PaginatedFetcher<T> {
  /** çœç•¥ */

  Future<List<T>> fetchNextPage(/** çœç•¥ */) async {
    /** çœç•¥ */
    final items = await fetch(/** çœç•¥ */);
    /** çœç•¥ */
    await ref.read(analyticsProvider).logEvent(/** çœç•¥ */);
    return items;
  }
}
```

---

# GOOD: ä¾å­˜æ€§ã®æ³¨å…¥ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã®ä¾‹

åˆ¥ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ã¿ã‚’å®šç¾©ã™ã‚‹ï¼š

```dart
@riverpod
Future<String?> Function() extractAccessToken(Ref ref) => throw UnimplementedError();
```

ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜ã—ã¦ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã—ã€åˆ©ç”¨ã™ã‚‹ï¼š

```dart
class SomeRepository {
  /** çœç•¥ */

  Future<Something> fetchSomething({/** çœç•¥ */}) async {
    final accessToken = _ref.read(extractAccessTokenProvider);
    final response = await _client.request(/** çœç•¥ */);
    /** çœç•¥ */
  }
}
```

---

# GOOD: ä¾å­˜æ€§ã®æ³¨å…¥ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

- ã‚¢ãƒ—ãƒªã®å®Ÿè¡Œæ™‚ã«ã¯ `ProviderScope.overrides` ã§ domain å±¤ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ³¨å…¥ã™ã‚‹
- ãŸã¨ãˆã°ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ãªã©ã‚‚åŒæ§˜ã«å®šç¾©ã™ã‚‹

```dart
ProviderScope(
  overrides: [
    extractAccessTokenProvider.overrideWith(
      (ref) => () async {
        final auth = await ref.read(authNotifierProvider.future);
        return auth.accessToken;
      },
    ),
  ],
)
```

---

# GOOD: ä¾å­˜æ€§ã®æ³¨å…¥ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæ™‚ã«ã¯ `ProviderContainer.overrides` ã§ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰ç„¡ã®çŠ¶æ³ã‚’ä¸Šæ›¸ãã™ã‚‹ã€‚

```dart
ProviderContainer createContainer({
  /** çœç•¥ */
  bool setApiAccessToken = true,
}) {
  final container = ProviderContainer(
    /** çœç•¥ */
    overrides: [
      extractAccessTokenProvider.overrideWith(
        (_) => () async => setApiAccessToken ? 'test-access-token' : null,
      ),
    ],
  );
  /** çœç•¥ */
}
```

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§å¾—ã‚‰ã‚Œã‚‹æ©æµ

## âœ… èª¤ã£ãŸä¾å­˜ã‚„å®Ÿè£…ãŒé™çš„è§£æã®ãƒ¬ãƒ™ãƒ«ã§é˜²ãŒã‚Œã‚‹

- èª¤ã£ãŸä¾å­˜ã‚„å®Ÿè£…ãŒä»•çµ„ã¿ä¸Šã§ããªããªã‚Šã€PR ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è² æ‹…ã‚‚å°‘ãªã„

## âœ… å„ã‚¿ã‚¹ã‚¯ã«å¿…è¦ãªå®Ÿè£…ãŒæ˜ç¢ºã§é›†ä¸­ã§ãã‚‹

- å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™ã‚„ã€è¨±ã•ã‚Œã‚‹ä¾å­˜ãŒæ˜ç¢ºã§ã€å®Ÿè£…å†…å®¹ãŒæ˜ç¢ºã§ã‚ã‚‹
- å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚‚å½“ç„¶ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹

## âœ… æ–°ãŸã«å‚ç”»ã—ãŸãƒ¡ãƒ³ãƒãƒ¼ãŒé–‹ç™ºã—ã‚„ã™ã„

- å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§å®Ÿè£…ã™ã¹ãå†…å®¹ã‚„ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ–¹æ³•ãŒãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã•ã‚Œã¦ã„ã‚‹
- Flutter ã«æ…£ã‚Œã¦ã„ãªã„ãƒ¡ãƒ³ãƒãƒ¼ã‚‚ã€domain ã‚„ repository å±¤ã®å®Ÿè£…ã¯ Dart ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦æ´»èºã§ãã‚‹

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§è¢«ã‚‹ä¸åˆ©ç›Šï¼Ÿ

## ğŸ¤” build_runner ã‚’å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å®Ÿè¡Œã™ã‚‹ã®ãŒé¢å€’

- ä»•æ–¹ãªã—ã€‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚„ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ãªã©ã®å·¥å¤«ã‚’ï¼

## ğŸ¤” åŒã˜æ©Ÿèƒ½ã«é–¢ã™ã‚‹å®Ÿè£…ãŒ Explorer ä¸Šã§é ãè¦‹ãˆã‚‹

- ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã®ä»•æ–¹ã‚’å·¥å¤«ã™ã‚‹ã¨ Explorer ä¸Šã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã™ã“ã¨ãŒã»ã¨ã‚“ã©ãªããªã‚‹

## ğŸ¤” å†—é•·ãªã‚³ãƒ¼ãƒ‰ãŒå¢—ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹

- ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®æ¦‚å¿µã€å‘½åã€ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã€HTTP ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã§å–ã‚Šæ‰±ã†æ¦‚å¿µã«å·®ãŒãªã„å ´åˆãªã©

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# doc comment ã‚’ 100% è¨˜è¿°

- public_member_api_docs ã‚’å…¨é¢çš„ã«æœ‰åŠ¹åŒ–
- Effective Dart ã«å¾“ã£ã¦æ­£ã—ã„è¨˜æ³•ãƒ»è¡¨ç¾ã‚’å¾¹åº•
- ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‹ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã€æ„è­˜ã‚’é‡è¦–
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒã€Œå®Ÿè¡Œå¯èƒ½ãªä»•æ§˜æ›¸ã€ã¨ã—ã¦ã®ç†æƒ³ã«è¿‘ã¥ã

---

# doc comment ã‚’ 100% è¨˜è¿°

```dart
/// firebase_analytics ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæä¾›ã™ã‚‹ã€Firebase Analytics ã®å„æ©Ÿèƒ½ã‚’ãƒ©ãƒƒãƒ—ã—ãŸã‚¯ãƒ©ã‚¹ã€‚
///
/// ã»ã¨ã‚“ã© firebase_analytics ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å†å®Ÿè£…ã®ã‚ˆã†ãªå†…å®¹ã«ãªã£ã¦ã„ã‚‹ãŒã€
///
/// - system ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ãŒ firebase_analytics ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç›´æ¥ä¾å­˜ã—ãªã„ã‚ˆã†ã«ã™ã‚‹
/// - åˆ†æãƒ­ã‚°ã®é€ä¿¡ã¨ã„ã†æ€§è³ªä¸Šã€åˆ©ç”¨ã™ã‚‹å´ã« await ã•ã›ãšã€ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚‚ã•ã›ãªã„ï¼ˆä¾‹å¤–ãŒ
/// èµ·ãã¦ã‚‚å‘¼ã³å‡ºã—å´ã®å‡¦ç†ã‚’æ­¢ã‚ãªã„ï¼‰ã‚ˆã†ã«ã™ã‚‹
/// - ä¸€ç¨®ã®è…æ•—é˜²æ­¢å±¤ã¨ã—ã¦ã®å®Ÿè£…ã¨ã™ã‚‹
///
/// ã“ã¨ãªã©ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹ã€‚
class FirebaseAnalyticsClient {
  /// [FirebaseAnalyticsClient] ã‚’ç”Ÿæˆã™ã‚‹ã€‚
  const FirebaseAnalyticsClient(this._firebaseAnalytics);

  final FirebaseAnalytics _firebaseAnalytics;

  /// Firebase Analytics ã«ãƒ­ã‚°ã‚’é€ä¿¡ã™ã‚‹ã€‚
  ///
  /// æœ¬ãƒ¡ã‚½ãƒƒãƒ‰ã®è¿”ã‚Šå€¤å‹ã¯ `void` ã§å®šç¾©ã•ã‚Œã¦ãŠã‚Šã€[unawaited] ã§ [_logEvent] ã‚’å‘¼ã³
  /// å‡ºã™ã“ã¨ã§ã€ã‚‚ã—ä¾‹å¤–ãŒç™ºç”Ÿã—ã¦ã‚‚å‘¼ã³å‡ºã—å´ã®å‡¦ç†ã‚’æ­¢ã‚ãªã„ï¼ˆãŸã ã—ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼
  /// ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å®šç¾©ã™ã‚Œã°ã€ã‚­ãƒ£ãƒƒãƒã§ãã‚‹ï¼‰ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚
  void logEvent({required String name, required Map<String, Object>? parameters}) =>
      unawaited(_logEvent(name: name, parameters: parameters));

  /** çœç•¥ */
}
```

---

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

matrix ã‚’çµ„ã‚“ã§å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ CI ã§ç¶™ç¶šçš„ã«å®Ÿè¡Œã™ã‚‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/ci-test.svg)

---

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯å±¤ãŠã‚ˆã³ãã‚Œã‚ˆã‚ŠæŠ½è±¡çš„ãªå±¤ã§ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ 100% ã§ã‚ã‚‹ã“ã¨ã‚’ CI ã§ç¶­æŒã—ç¶šã‘ã‚‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/ci-coverage-report.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# å®Ÿè£…ã®ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®å……å®Ÿ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# å®Ÿè£…ã®ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®å……å®Ÿ

- å®Ÿè£…ã®å¤§éƒ¨åˆ†ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã—ã¦ã‚¹ãƒ‹ãƒšãƒƒãƒˆã«ï¼š
  - Dto å®šç¾©ã¨ãã®ãƒ†ã‚¹ãƒˆ
  - Repository ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã¨ãã®ãƒ†ã‚¹ãƒˆ
  - æ¥­å‹™æ¦‚å¿µã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®šç¾©ã¨ãã®ãƒ†ã‚¹ãƒˆ
  - é–¢æ•° ãŠã‚ˆã³ class Riverpod ã®å®Ÿè£…ã¨ãã®ãƒ†ã‚¹ãƒˆ
  - UseCase ã®å®Ÿè£…ã¨ãã®ãƒ†ã‚¹ãƒˆ
  - ...ãªã©
- doc comment ã‚‚ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚‚å«ã‚ã¦ã‚¹ãƒ‹ãƒšãƒƒãƒˆåŒ–
- ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®æ•´å‚™ã¨ç”Ÿæˆ AI ã®æ´»ç”¨ã¯ç›¸æ€§ãŒéå¸¸ã«è‰¯ã„

---

# å®Ÿè£…ã®ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®å……å®Ÿ

```code-snippets
"import 'package:repository/repository.dart';",
"import 'package:riverpod_annotation/riverpod_annotation.dart';",
"import 'package:util/util.dart';",
"",
"import '../../../util/omiai_api/internal/omiai_api_handler.dart';",
"",
"part '${TM_FILENAME_BASE}.g.dart';",
"",
"/// ...ã‚’å–å¾—ã™ã‚‹ã€‚",
"///",
"/// å–å¾—ã«å¤±æ•—ã—ãŸå ´åˆã¯ã€...ã€‚",
"@riverpod",
"Future<Foo> foo(FooRef ref) async {",
"  final result = await ref.watch(omiaiApiHandlerProvider).request(() async => ref.read(fooRepositoryProvider).fetchFoo());",
"  switch (result) {",
"    case SuccessRepositoryResult(:final data):",
"      return Foo.fromDto(data);",
"    case FailureRepositoryResult(:final e, :final errorDto):",
"      throw SomeException();",
"  }",
"}",
"",
"class SomeException implements Exception {}",
```

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# Add-to-App ã®æ´»ç”¨

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)
