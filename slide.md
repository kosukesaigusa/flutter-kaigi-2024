---
marp: true
theme: base
_class: lead
paginate: true
backgroundColor: fff
backgroundImage: url('https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background.svg')
---

<style scoped>h2 {font-size: 36px; } h3 {font-size: 42px; }</style>

![bg left:40% 80%](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/kosukesaigusa.jpg)

## **FlutterKaigi 2024**

### ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã€Omiaiã€ã®<br>Flutterã¸ã®ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã®æŒ‘æˆ¦

Kosuke Saigusaï¼ˆæ ªå¼ä¼šç¤¾ Omiaiï¼‰

---

# è‡ªå·±ç´¹ä»‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/self-introduction.svg)

- Kosuke Saigusa (@kosukesaigusa)
- æ ªå¼ä¼šç¤¾ Omiai Flutter ãƒ†ãƒƒã‚¯ãƒªãƒ¼ãƒ‰
- FlutterNinjas 2024, FlutterKaigi 2023 ç­‰ã§ç™»å£‡
- FlutterGakkai, æ±äº¬ Flutter ãƒãƒƒã‚«ã‚½ãƒ³é‹å–¶

---

# Omiai ã«ã¤ã„ã¦

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/omiai.png)

---

# æ˜¨ä»Šã®ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã¨å¸‚å ´ã«ã¤ã„ã¦

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/matching-service.png)

---

# ã‚¨ãƒ‹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã«ã¤ã„ã¦

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/enito-01.svg)

---

# ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹çµŒå–¶ä½“åˆ¶

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/enito-02.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# æœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚´ãƒ¼ãƒ«

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# æœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚´ãƒ¼ãƒ«

<div class="center-goal-container">
  <h2>ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã€Omiaiã€ã‚’é¡Œæã«<br>å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã® Flutter ã¸ã®ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã‚’<br>æˆåŠŸã«å°ãã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’è€ƒãˆã‚‹</h2>
</div>

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãªãœã€Omiaiã€ã¯ Flutter ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ãªãœã€Omiaiã€ã¯ Flutter ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

## ğŸ’¬ èƒŒæ™¯

- 2012 å¹´ã‹ã‚‰é•·å¹´é‹å–¶ã•ã‚Œã¦ããŸã‚µãƒ¼ãƒ“ã‚¹
- iOSãƒ»Android (, Web) ã®å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®å¤ã„ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ãŒæŠ±ãˆã‚‹å¤šãã®æŠ€è¡“çš„è² å‚µã‚„ä»•æ§˜å·®ç•°
- ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã®è§£æ¶ˆãƒ»ä»•æ§˜å¤‰æ›´ã‚‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªãŒç†ç”±ã§é€²ã‚ã¥ã‚‰ã„

## &#x2705; ç›®æ¨™

- Flutter ã¸ã®ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã«ã‚ˆã‚‹å˜ä¸€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹åŒ–ã¨æŠ€è¡“çš„è² å‚µã®è¿”æ¸ˆ
- ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ä¸­ã‚‚æ©Ÿèƒ½è¿½åŠ ã¯æ­¢ã‚ãªã„
- toC ã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚ã‚‹ã¹ãç´ æ—©ããƒ»ç´°ã‹ã„é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã§ã®é–‹ç™ºãƒ»æ¤œè¨¼ã‚’å®Ÿç¾ã™ã‚‹

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã©ã®ã‚ˆã†ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ã©ã®ã‚ˆã†ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ã®ã‹ï¼Ÿ

## &#x2705; è² å‚µåŒ–ã‚’ç¹°ã‚Šè¿”ã•ãšã€é«˜ã„é–‹ç™ºç”Ÿç”£æ€§ã‚’ç¶­æŒã—ç¶šã‘ã‚‹

- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€CIã€ãƒ†ã‚¹ãƒˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã§å¤šãã®å·¥å¤«

## &#x2705; Flutter çµŒé¨“ã®ç„¡ã„ãƒ¡ãƒ³ãƒãƒ¼ã‚„æ–°è¦å‚ç”»ãƒ¡ãƒ³ãƒãƒ¼ãŒæ—©æœŸã«æ´»èºã§ãã‚‹

- Flutter çµŒé¨“è€…ã‚¼ãƒ­ãƒ»æ¥­å‹™å§”è¨—ä¸­å¿ƒçµ„ç¹”ã‹ã‚‰æ­£ç¤¾å“¡æ¡ç”¨ã«ã‚ˆã‚‹ãƒãƒ¼ãƒ ã®æ‹¡å¤§ã¸

## &#x2705; ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ä¸­ã‚‚æ©Ÿèƒ½è¿½åŠ ã¯æ­¢ã‚ãªã„

- Add-to-App ã‚’åˆ©ç”¨ã—ã¦æ—¢å­˜ã‚¢ãƒ—ãƒªã‹ã‚‰ Flutter ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å‘¼ã³å‡ºã™
- ä¸»è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‹ã‚‰é †ã«ã€æ–°ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãªãŒã‚‰ Flutter ã«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# é™¥ã‚ŠãŒã¡ãªç¾å®Ÿ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

# PR ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§é˜²ãã—ã‹ãªã„ã‚³ãƒ¼ãƒ‰è¦ç´„é•å

- UI å±¤ã‹ã‚‰ç›´æ¥ Repository ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã®ã‚’ç¦æ­¢ã—ã¦ã„ã‚‹å ´åˆ
- ã‚³ãƒ¼ãƒ‰è¦ç´„ã§ç¸›ã‚Šã€PR ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§é˜²ãã—ã‹æ–¹æ³•ãŒãªã„
- è¦‹é€ƒã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒç”Ÿãæ®‹ã£ã¦ã—ã¾ã†ã¨ã€æ–°è¦å‚ç”»ãƒ¡ãƒ³ãƒãƒ¼ã®è¿·ã„ã«ç¹‹ãŒã‚‹

```dart
ElevatedButton(
  onPressed: () async {
    await someRepositoryMethod();
  },
  /** çœç•¥ */
);
```

---

# UI ã¨ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢ã®å¤±æ•—

- æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ã« `BuildContext` ãŒä¾å­˜ã™ã‚‹
- ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒ Dart ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§æ›¸ã‘ãªã„

```dart
import 'package:flutter/material.dart';
import 'package:flutter_localizations/flutter_localizations.dart';

Future<void> someLogic(BuildContext context) async {
  await doSomething();
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(content: Text(AppLocalizations.of(context).success)),
  );
}
```

---

# ä¸è‡ªç„¶ãªä¾å­˜

- UI å±¤ã§ HTTP é€šä¿¡ãŒèµ·å› ã®ä¾‹å¤–ã‚’æµã‚Œã¦ãã‚‹ãƒ»æ•æ‰ã™ã‚‹
- UI å±¤ãŒç‰¹å®šã® HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã™ã‚‹ã®ã¯ä¸è‡ªç„¶ï¼ˆçŸ¥ã‚‹ã¹ãã§ãªã„ï¼‰

```dart
import 'package:dio/dio.dart';

ElevatedButton(
  onPressed: () async {
    try {
      await doSomething();
    } on DioException catch (e) {
      /** çœç•¥ */
    },
  },
  /** çœç•¥ */
),
```

---

# æ›–æ˜§ãªä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ–¹é‡

- ã©ã“ã§ã©ã‚“ãªä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã¹ãã‹ã®æ–¹é‡ãŒæ˜ç¢ºã§ãªã„
- æ•æ‰ã—ãŸä¾‹å¤–ã‚’ã©ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«åæ˜ ã™ã‚‹ã‹ã®æ–¹é‡ãŒæ˜ç¢ºã§ãªã„
- å›³ã‚‰ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãªã©ã®æƒ…å ±ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¦‹ã›ã¦ã—ã¾ã†

```dart
ElevatedButton(
  onPressed: () async {
    try {
      await doSomething();
    } on APIException catch (e) {
      await showDialog<void>(
        context: context,
        builder: (context) => AlertDialog(content: Text('${e.statusCode}')),
      );
    },
  },
  /** çœç•¥ */
),
```

---

# ä¾å­˜ã‚’èª¤ã£ã¦è² å‚µåŒ–

- é€šä¿¡å±¤ãŒã€æ¥­å‹™çŸ¥è­˜ã¨ã—ã¦ã®èªè¨¼æƒ…å ±ã«ä¾å­˜ã™ã‚‹
- é€šä¿¡å±¤ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’æ›¸ãã®ã«ã€æ¥­å‹™çŸ¥è­˜ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- ã‚‚ã—ã“ã®ä¾å­˜ãŒè¨±ã•ã‚Œã‚‹ãªã‚‰ã€ã‚ã‚‰ã‚†ã‚‹æ¥­å‹™çŸ¥è­˜ã«åŒæ§˜ã«ä¾å­˜ã—å§‹ã‚ã‚‹å±é™ºãŒã‚ã‚‹

```dart
class SomeRepository {
  /** çœç•¥ */

  Future<Something> fetchSomething({/** çœç•¥ */}) async {
    final accessToken = _ref.read(accessTokenProvider);
    final response = await _client.request(/** çœç•¥ */);
    /** çœç•¥ */
  }
}
```

---

# ä¾å­˜ã‚’èª¤ã£ã¦è² å‚µåŒ–

- å½“åˆã®æ±ç”¨çš„ãªåŸºç›¤å®Ÿè£…ãŒã€ã„ã¤ã®é–“ã«ã‹æ„å›³ã—ãªã„å¯¾è±¡ã«ä¾å­˜ã™ã‚‹ã‚ˆã†ã«ãªã‚‹
- æ±ç”¨æ€§ã¯å¤±ã‚ã‚Œã€è²¬å‹™ãŒæ›–æ˜§ãªè² å‚µã‚³ãƒ¼ãƒ‰ã«

```dart
class PaginatedFetcher<T> {
  /** çœç•¥ */

  Future<List<T>> fetchNextPage(int page, int perPage) async {
    /** çœç•¥ */
    final items = await fetch(/** çœç•¥ */);
    /** çœç•¥ */
    await ref.read(someUseCaseProvider).doSomething();
    return items;
  }
}
```

---

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¢ãƒ—ãƒªã®å¯†çµåˆ

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«çŸ¥ã‚‰ã›ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ãŒãã®ã¾ã¾åˆ©ç”¨ã•ã‚Œã‚‹
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã¨ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¢ãƒ—ãƒªã®å¢ƒç•ŒãŒæ›–æ˜§

```dart
ElevatedButton(
  onPressed: () async {
    try {
      await doSomething();
    } on APIException catch (e) {
      await showDialog<void>(
        context: context,
        builder: (context) => AlertDialog(content: Text(e.message)),
      );
    },
  },
  /** çœç•¥ */
),
```

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã©ã®ã‚ˆã†ã«é˜²ãï¼Ÿ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# å¯èƒ½ãªé™ã‚Šä»•çµ„ã¿ã§é˜²ãï¼

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

# æ–¹é‡

## &#x2705; ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

- ãƒ¬ã‚¤ãƒ¤ãƒ¼ã”ã¨ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹
- å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è²¬å‹™ã¨è¨±å¯ã•ã‚Œã‚‹ä¾å­˜ã‚’å³å¯†ã«ã™ã‚‹
- Flutter ã®ä¸–ç•Œã¨ Dart ã®ä¸–ç•Œã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã¨ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¢ãƒ—ãƒªã®å¢ƒç•Œã‚’æ˜ç¢ºã«ã™ã‚‹

## &#x2705; ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ååˆ†ã«ç¶™ç¶šçš„ã«æ›¸ã

- æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯å±¤ãŠã‚ˆã³ãã‚Œã‚ˆã‚ŠæŠ½è±¡çš„ãªå±¤ã§ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒã‚«ãƒãƒ¬ãƒƒã‚¸ 100% ã§è¨˜è¿°ã§ãã‚‹

## &#x2705; å®Ÿè£…ã‚’å¯èƒ½ãªé™ã‚Šãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã™ã‚‹

- å…¸å‹çš„ãªå®Ÿè£…ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã—ã€æ–°è¦å‚ç”»ãƒ¡ãƒ³ãƒãƒ¼ã®æ—©æœŸã®æ´»èºã‚’å®Ÿç¾ã™ã‚‹

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ï¼ˆæŠœç²‹ï¼‰

- ãƒ¬ã‚¤ãƒ¤ãƒ¼ã”ã¨ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹
- å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«è¨±ã•ã‚Œã‚‹ç›´æ¥çš„ãªä¾å­˜ã¯çŸ¢å°ã®å…ˆã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ã«é™å®šã•ã‚Œã‚‹
- ä»–ã«ã‚‚ Unimplemented ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ã¿ã‚’å®šç¾©ã—ã€å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«åˆ©ç”¨ã•ã›ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ã‚‚ã‚ã‚‹

<p class="note">â€» ã“ã¨ã°é£ã„ã¯ Flutter å…¬å¼ã®"Architecting Flutter apps" ã‚„ Android Developers ã® "Guide to app architecture" ã«é¡ä¼¼</p>

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-all.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (app)

- Flutter ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã®å®Ÿè£…
  - `dart-define` ãªã©ã‚’é€šã˜ãŸã‚¢ãƒ—ãƒªã®è¨­å®šå€¤ã®å–å¾—ãƒ»æ±ºå®š
  - `ProviderScope.overrides` ã«ã‚ˆã‚‹ä¾å­˜ã®æ³¨å…¥
- UI å±¤ã¨ã—ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å®Ÿè£…
  - ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãƒ„ãƒªãƒ¼ã®æ§‹ç¯‰ã€ç”»é¢é·ç§»ã€å„ç”»é¢ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æç”»ã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-app.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (base_ui)

- Flutter ã‚¢ãƒ—ãƒªå†…ã§å…±é€šåˆ©ç”¨ã•ã‚Œã‚‹ ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã€è‰²ãªã©ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã®å®Ÿè£…
- ç”»åƒã€ãƒœã‚¿ãƒ³ã€AppBarã€TextField ãªã©ã®åŸºç¤çš„ãª UI éƒ¨å“ã®å®Ÿè£…

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-base-ui.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (domain)

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã®æ¥­å‹™æ¦‚å¿µã‚’è¡¨ã™ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©
- app ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ä¾‹å¤–å‹ã®å®šç¾©
- Repository ã‚’é€šã˜ã¦ã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚„ä¿å­˜ãªã©ã‚’å«ã‚€æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã®è¨˜è¿°

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-domain.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (repository)

- ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã®ã‚„ã‚Šå–ã‚Šã®è¨˜è¿°
- æ¥ç¶šå…ˆã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆè‡ªç¤¾ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒã‚„ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãªã©ï¼‰ã®æƒ…å ±ã¯è¡¨å‡ºã•ã›ãªã„

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-repository.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ (system)

- 3rd ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ„ãƒ¼ãƒ«ã‚’ãƒ©ãƒƒãƒ—ã—ã¦åŸºç¤çš„ãªå®Ÿè£…ã‚’è¨˜è¿°
  - ä¾‹ï¼šHTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€Shared Preferences, Firebase Analytics ãªã©
- 3rd ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ„ãƒ¼ãƒ«ã¨ã®ä¾å­˜ã¯ä¾‹å¤–ã‚‚å«ã‚ã¦é–‰ã˜è¾¼ã‚ã¦å¤–éƒ¨ã«è¡¨å‡ºã•ã›ãªã„
- ä¸è¦ãªæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯å¡ã„ã§ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-system.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ï¼ˆFlutter ã®ä¸–ç•Œï¼‰

- app, base_ui ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ Flutter ã«ç›´æ¥ä¾å­˜ã™ã‚‹
- Flutter ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-app-base-ui.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ï¼ˆDart ã®ä¸–ç•Œï¼‰

- domain, repository, system ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ Flutter ã«ã¯ç›´æ¥ä¾å­˜ã—ãªã„
  - SharedPreferences ãªã©ã¯å†…éƒ¨ã§ Flutter ã«ã¯ä¾å­˜ã—ã¦ã„ã‚‹ã®ã§ã€transitive ã«ã¯ä¾å­˜ã™ã‚‹
- Dart ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
  - Dart è¨€èªã¨ riverpod ã‚„ freezed ã«ã•ãˆæ…£ã‚Œã‚Œã° Flutter çµŒé¨“ãŒæµ…ãã¦ã‚‚æ›¸ã‘ã‚‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-domain-repository-system.svg)

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ï¼ˆã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã¨ã®å¢ƒç•Œï¼‰

- repository ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã¨ã®å¢ƒç•Œã¨ã—ã¦åƒã
- ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã¯ repository ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å¸åã—åˆ‡ã‚‹
- app, domain ã¯ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®å­˜åœ¨ã‚„æ¥­å‹™çŸ¥è­˜ã‚’æ„è­˜ã›ãšã«å®Ÿè£…ã™ã‚‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-repository.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Ÿè£…å†…å®¹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# base_ui

- Flutter ã‚¢ãƒ—ãƒªå†…ã§å…±é€šåˆ©ç”¨ã•ã‚Œã‚‹ ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã€è‰²ãªã©ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã®å®Ÿè£…
- ç”»åƒã€ãƒœã‚¿ãƒ³ã€AppBarã€TextField ãªã©ã®åŸºç¤çš„ãª UI éƒ¨å“ã®å®Ÿè£…

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-base-ui.svg)

---

# base_ui ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹

- Flutter ã¸ã®ä¾å­˜: direct
- ç”»åƒã®ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…ã®ãŸã‚ã« extended_imageã€é™çš„ã‚¢ã‚»ãƒƒãƒˆã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®ãŸã‚ã« flutter_gen ãªã©ã‚’åˆ©ç”¨

```yaml
dependencies:
  extended_image:
  flutter:
    sdk: flutter
  flutter_svg:

dev_dependencies:
  build_runner:
  flutter_gen_runner:
```

---

# base_ui ã®å®Ÿè£…ä¾‹

- Figma ã¨åŒåã§å®šç¾©ã•ã‚ŒãŸ TextStyle, Color ãªã©ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰
- Material ã®ãƒ†ãƒ¼ãƒå®šç¾©ã¨ã¯ä¸€è‡´ã—ã¦ã„ãªã„

```dart
/// ã‚¢ãƒ—ãƒªã§ä½¿ç”¨ã™ã‚‹è‰²ä¸€è¦§ã€‚
abstract interface class AppColor {
  /// ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã® 01 ã®èµ¤è‰²ã€‚
  static const Color primary01 = Color(0xFFFF3159);

  /// ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã® 02 ã®é’è‰²ã€‚
  static const Color primary02 = Color(0xFF3F9AD1);

  /// ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒ¼ã® 01 ã®ãƒ”ãƒ³ã‚¯è‰²ã€‚
  static const Color secondary01 = Color(0xFFFE8D8B);

  /** çœç•¥ */
}
```

---

# base_ui ã®å®Ÿè£…ä¾‹

- ãƒœã‚¿ãƒ³ã€ç”»åƒã€AppBarã€TextField ãªã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãã‚Œã‚‰ã®çµ„ã¿åˆã‚ã›
- Figma ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®šç¾©ã¨ä¸€è‡´ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```dart
/// ã‚¢ãƒ—ãƒªå†…ã§å…±é€šã§ç”¨ã„ã‚‰ã‚Œã‚‹ [ElevatedButton].
class CommonElevatedButton extends StatelessWidget {
  /// S ã‚µã‚¤ã‚ºã® [CommonElevatedButton] ã‚’ç”Ÿæˆã™ã‚‹ã€‚
  const CommonElevatedButton.s({/** çœç•¥ */});

  /// S ã‚µã‚¤ã‚ºã®ã‚¢ã‚¤ã‚³ãƒ³ä»˜ãã® [CommonElevatedButton] ã‚’ç”Ÿæˆã™ã‚‹ã€‚
  const CommonElevatedButton.sWithIcon({/** çœç•¥ */});

  /** çœç•¥ */
}
```

---

# system

- 3rd ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ„ãƒ¼ãƒ«ã‚’ãƒ©ãƒƒãƒ—ã—ã¦åŸºç¤çš„ãªå®Ÿè£…ã‚’è¨˜è¿°
- å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ä¾å­˜ã‚’é–‰ã˜è¾¼ã‚ã¦ã€å¤–éƒ¨ã«è¡¨å‡ºã•ã›ãªã„

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-system.svg)

---

# system ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹

- Flutter ã¸ã®ä¾å­˜: transitive
- å„ç¨®ã® 3rd ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ„ãƒ¼ãƒ«ã«ä¾å­˜ã™ã‚‹

```yaml
dependencies:
  dio:
  firebase_analytics:
  firebase_remote_config:
  shared_preferences:
```

---

# system ã®å®Ÿè£…ä¾‹

- `HTTPClient` ã‚¯ãƒ©ã‚¹ã®ä¾‹ï¼ˆä¸€éƒ¨çœç•¥ãƒ»ç°¡ç•¥åŒ–ï¼‰
- å†…éƒ¨ã§ dio ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ä¾å­˜

```dart
class HttpClient {
  HttpClient({required String baseUrl, Map<String, dynamic>? headers})
      : _client = DioHttpClient(baseUrl: baseUrl, headers: headers);

  Future<HttpResponse<dynamic>> request({
    required HttpMethod method,
    required String path,
    Map<String, dynamic>? queryParameters,
    Object? data,
    Map<String, dynamic>? headers,
  }) async {
    /** çœç•¥ */
  }
}
```

---

# system ã®å®Ÿè£…ä¾‹

- `HTTPClient` ã‚’é€šã˜ãŸ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®çµæœã‚’è¡¨ç¾ã™ã‚‹ `HttpResponse` ã‚¯ãƒ©ã‚¹ã®ä¾‹ï¼ˆä¸€éƒ¨çœç•¥ãƒ»ç°¡ç•¥åŒ–ï¼‰
- Result å‹ã®ã‚ˆã†ãªå½¢ã§ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æˆåŠŸãƒ»å¤±æ•—ã‚’è¡¨ç¾

```dart
@freezed
sealed class HttpResponse<T> with _$HttpResponse<T> {
  const factory HttpResponse.success({
    required T data,
    required Map<String, List<String>> headers,
  }) = SuccessHttpResponse<T>;

  const factory HttpResponse.failure({
    T? data,
    required Object e,
    required ErrorStatus status,
  }) = FailureHttpResponse<T>;
}
```

---

# system ã®å®Ÿè£…ä¾‹

- HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®çµæœã¨ã—ã¦ `HttpResponse` ã‚’è¿”ã™
- 3rd ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ä¾å­˜ã¯ä¾‹å¤–ã‚‚å«ã‚ã¦å¤–éƒ¨ã«ã¯è¡¨å‡ºã•ã›ãªã„

```dart
class HttpClient {
  /** çœç•¥ */

  Future<HttpResponse<dynamic>> request({/** çœç•¥ */}) async {
    try {
      final response = await _client.request<dynamic>(/** çœç•¥ */);
      return HttpResponse.success(/** çœç•¥ */);
    } on DioException catch (e) {
      /** çœç•¥ */
      return HttpResponse.failure(/** çœç•¥ */);
    }
  }
}
```

---

# repository

- ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’è¨˜è¿°ã™ã‚‹
- æ¥ç¶šå…ˆã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆè‡ªç¤¾ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒã‚„ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãªã©ï¼‰ã®æƒ…å ±ã¯è¡¨å‡ºã•ã›ãªã„

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-repository.svg)

---

# repository ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: transitive
- system ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã«ã—ã¦ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã©ã‚’è¡Œã†
- json_serializable, freezed ã«ã‚ˆã‚‹ HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‘ãƒ¼ã‚¹ã¨ Dto ã®å®šç¾©ã‚’è¡Œã†

```yaml
dependencies:
  freezed_annotation:
  json_annotation:
  riverpod:
  system:
    path: ../system

dev_dependencies:
  build_runner:
  freezed:
  json_serializable:
  riverpod_generator:
```

---

# repository ã®å®Ÿè£…ä¾‹

- Repository ã«ã‚ˆã‚‹é€šä¿¡çµæœã‚’è¡¨ç¾ã™ã‚‹ `RepositoryResult` ã‚¯ãƒ©ã‚¹ã®ä¾‹ï¼ˆä¸€éƒ¨çœç•¥ãƒ»ç°¡ç•¥åŒ–ï¼‰
- Result å‹ã®ã‚ˆã†ãªå½¢ã§æˆåŠŸãƒ»å¤±æ•—ã‚’è¡¨ç¾

```dart
@freezed
sealed class RepositoryResult<T> with _$RepositoryResult<T> {
  const factory RepositoryResult.success(T data) = SuccessRepositoryResult<T>;

  const factory RepositoryResult.failure(
    Object e, {
    FailureRepositoryResultReason? reason,
    ErrorDto? errorDto,
  }) = FailureRepositoryResult;
}
```

---

# repository ã®å®Ÿè£…ä¾‹

- `HttpResponse` ã®æˆåŠŸãƒ»å¤±æ•—ã‚’ switch æ–‡ã§åˆ†å²ã—ã¦ã€`RepositoryResult` ã‚’è¿”ã™ã€‚

```dart
class AccountDetailRepository {
  /** çœç•¥ */

  Future<RepositoryResult<AccountDetailDto>> fetchAccountDetail() async {
    final response = await _ref.read(httpClientProvider).request(/** çœç•¥ */);
    switch (response) {
      case SuccessHttpResponse(:final data):
        final dto = AccountDetailDto.fromJson(data as Map<String, dynamic>);
        return RepositoryResult.success(dto);
      case FailureHttpResponse(/** çœç•¥ */):
        /** çœç•¥ */
        return RepositoryResult.failure(/** çœç•¥ */);
    }
  }
}
```

---

# repository ã®å®Ÿè£…ä¾‹

- Dto ã¨ã—ã¦ HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹å®šç¾©ã‚’ã™ã‚‹
- ä¸é©åˆ‡ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚„å‹ã‚’å¤‰æ›ã—ã¦ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã‚’æŒã¡è¾¼ã¾ãªã„

```dart
@freezed
class FooDto with _$FooDto {
  const factory FooDto({
    @JsonKey(name: 'inappropriate_field_name') required String someFieldName,
    @Default([]) List<String> things,
    @flexibleBoolConverter required bool isSomething,
    @flexibleDateTimeConverter required DateTime someDateTime,
  }) = _FooDto;

  factory FooDto.fromJson(Map<String, dynamic> json) => _$FooDtoFromJson(json);
}
```

---

# domain

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã®æ¥­å‹™æ¦‚å¿µã‚’è¡¨ã™ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©
- app ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ä¾‹å¤–å‹ã®å®šç¾©
- Repository ã‚’é€šã˜ã¦ã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚„ä¿å­˜ãªã©ã‚’å«ã‚€æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã®è¨˜è¿°

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-domain.svg)

---

# domain ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: transitive
- repository ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã—ã¦ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- freezed ã§æ¥­å‹™æ¦‚å¿µã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å®šç¾©ã™ã‚‹
- riverpod ã§çŠ¶æ…‹ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹

```yaml
dependencies:
  freezed_annotation:
  repository: 
    path: ../repository
  riverpod:
  riverpod_annotation:

dev_dependencies:
  build_runner:
  freezed:
  riverpod_generator:
```

---

# domain ã®å®Ÿè£…ä¾‹

- ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã«ãŠã‘ã‚‹ãŠç›¸æ‰‹ãƒ¡ãƒ³ãƒãƒ¼ã®æ¥­å‹™æ¦‚å¿µã®å®šç¾©ã®ä¾‹
- HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å¯¾å¿œã™ã‚‹ Dto ã‹ã‚‰ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç”Ÿæˆã™ã‚‹

```dart
@freezed
class Member with _$Member {
  const factory Member({
    required int userId,
    /** çœç•¥ */
    required LogInStatus loginStatus,
  }) = _Member;

  factory Member.fromDto(MemberDto dto) => Member(
    userId: dto.userId,
    /** çœç•¥ */
    loginStatus: LogInStatus.fromDateTime(dto.lastAccessedAt),
  );
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- ãŠç›¸æ‰‹ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆç›´è¿‘ã©ã®ãã‚‰ã„ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‹ï¼‰ã®å®šç¾©ã®ä¾‹
- æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ã¨ã„ã†ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ (DB) ä¸Šã®äº‹å®Ÿã‹ã‚‰ã€ãƒ­ã‚°ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ã„ã†ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã«ãŠã‘ã‚‹æ¥­å‹™æ¦‚å¿µã‚’è¨ˆç®—ã™ã‚‹

```dart
enum LogInStatus {
  active,

  recent,

  inactive,
  ;

  factory LogInStatus.fromDateTime(DateTime lastAccessedAt) {/** çœç•¥ */}
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- riverpod ã®é–¢æ•°ã§å–å¾—å‡¦ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã™ã‚‹
- repository ã«ã‚ˆã‚‹å–å¾—çµæœã‚’ switch æ–‡ã§åˆ†å²ã—ã¦å‡¦ç†ã™ã‚‹

```dart
@riverpod
Future<Member> memberDetail(MemberDetailRef ref, {required int userId}) async {
  final result = await ref.read(memberRepositoryProvider).fetchMember(userId);
  switch (result) {
    case SuccessRepositoryResult(:final data):
      return Member.fromDto(data);
    case FailureRepositoryResult(/** çœç•¥ */):
      /** çœç•¥ */
  }
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- riverpod ã®ã‚¯ãƒ©ã‚¹ (Notifier) ã§çŠ¶æ…‹ç®¡ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã™ã‚‹

```dart
@Riverpod(keepAlive: true)
class AccountDetailNotifier extends _$AccountDetailNotifier {
  /** çœç•¥ */

  Future<void> updateAccountDetail() async {
    final result = await ref.read(accountDetailRepositoryProvider).updateAccountDetail(/** çœç•¥ */);
    switch (result) {
      case SuccessRepositoryResult(/** çœç•¥ */):
        /** çœç•¥ */
      case FailureRepositoryResult(/** çœç•¥ */):
        /** çœç•¥ */
    }
  }
}
```

---

# domain ã®å®Ÿè£…ä¾‹

- ãŠç›¸æ‰‹ã«ã€Œã„ã„ã­ï¼ã€ã‚’é€ä¿¡ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆçŠ¶æ…‹ç®¡ç†ã‚’ä¼´ã‚ãªã„ï¼‰ã®ä¾‹
- æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã¨ã—ã¦å–ã‚Šæ‰±ã†ã¹ãä¾‹å¤–ã‚’å®šç¾©ã—ã€ã‚¹ãƒ­ãƒ¼ã™ã‚‹

```dart
class SendLikeUseCase {
  /** çœç•¥ */

  Future<void> invoke(/** çœç•¥ */) async {
    final result = await _ref.read(likeRepositoryProvider).sendLike(/** çœç•¥ */);
    switch (result) {
        /** çœç•¥ */
      case FailureRepositoryResult(/** çœç•¥ */):
        /** çœç•¥ */
        throw InsufficientPointsToSendLikeException();
    }
  }
}

class InsufficientPointsToSendLikeException implements Exception {}
```

---

# app

- Flutter ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã®å®Ÿè£…
  - `dart-define` ãªã©ã‚’é€šã˜ãŸã‚¢ãƒ—ãƒªã®è¨­å®šå€¤ã®å–å¾—ãƒ»æ±ºå®š
  - `ProviderScope.overrides` ã«ã‚ˆã‚‹ä¾å­˜ã®æ³¨å…¥
- UI å±¤ã¨ã—ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å®Ÿè£…
  - ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãƒ„ãƒªãƒ¼ã®æ§‹ç¯‰ã€ç”»é¢é·ç§»ã€å„ç”»é¢ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æç”»ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã¨ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-app.svg)

---

# app ãŒä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Flutter ã¸ã®ä¾å­˜: direct

```yaml
dependencies:
  auto_route:
  base_ui:
    path: ../base_ui
  domain:
    path: ../domain
  flutter:
    sdk: flutter
  flutter_hooks:
  hooks_riverpod:

dev_dependencies:
  auto_route_generator:
  build_runner:
```

---

# app ã®å®Ÿè£…ä¾‹

- auto_route ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã—ã¦ãƒ«ãƒ¼ãƒˆå®šç¾©

```dart
@RoutePage()
class MemberProfilePage extends StatelessWidget {
  const MemberProfilePage({
    @PathParam('userId') required this.userId,
    super.key,
  });

  static String resolvePath({required String userId}) => '/users/$userId';

  final int userId;

  @override
  Widget build(BuildContext context) {/** çœç•¥ */}
}
```

---

# app ã®å®Ÿè£…ä¾‹

- domain å±¤ã®å–å¾—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ `ref.watch` ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›®ã«ã™ã‚‹ä½“é¨“ã‚’å®Ÿè£…ã™ã‚‹

```dart
@override
Widget build(BuildContext context, WidgetRef ref) {
  // ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã€‚
  final memberAsyncValue = ref.watch(memberDetailProvider(userId: userId));
  return switch (memberAsyncValue) {
    AsyncData(value: final member) => /** çœç•¥ */,
    AsyncError() => /** çœç•¥ */,
    _ => /** çœç•¥ */,
  };
}
```

---

# app ã®å®Ÿè£…ä¾‹

- UI ã‚’é€šã˜ãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒˆãƒªã‚¬ãƒ¼ã« domain å±¤ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã™
- domain å±¤ã«å®šç¾©ã•ã‚ŒãŸä¾‹å¤–ã‚’å®Ÿç¾ã—ãŸã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«å¾“ã£ã¦å‡¦ç†ã™ã‚‹
- base_ui ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹

```dart
CommonFilledButton.sWithIcon(
  onPressed: () async {
    try {
      await _ref.read(sendLikeUseCaseProvider).invoke(/** çœç•¥ */);
    } on InsufficientPointsToSendLikeException catch (e) {
      await _showErrorDialog(/** çœç•¥ */);
    }
    /** çœç•¥ */
  }
  text: 'ã„ã„ã­!',
  icon: OmiaiAssets.svg.like.svg(),
)
```

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-repository-system.svg)

## repository - system é–“

- dio ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é€šã˜ã¦ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã†
- dio ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ä¾å­˜ã¯ä¾‹å¤–ã‚‚å«ã‚ã¦ repository ã«è¡¨å‡ºã—ãªã„
- Result å‹ã®ã‚ˆã†ãª `HttpResponse` å‹ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã™ã‚‹ã“ã¨ã§ã€repository å±¤ã§ã® `switch` ã«ã‚ˆã‚‹æˆåŠŸãƒ»å¤±æ•—ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¼·åˆ¶ã€ç”»ä¸€åŒ–ã•ã‚Œã‚‹

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-domain-repository.svg)

## domain - repository é–“

- repository ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿æ›¸ãã™ã‚‹
- Result å‹ã®ã‚ˆã†ãª `RepositoryResult` å‹ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã™ã‚‹ã“ã¨ã§ã€domain å±¤ã§ã® `switch` ã«ã‚ˆã‚‹æˆåŠŸãƒ»å¤±æ•—ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¼·åˆ¶ã€ç”»ä¸€åŒ–ã•ã‚Œã‚‹
- domain å±¤ã§ã¯ Dto ã‹ã‚‰æ¥­å‹™çŸ¥è­˜ã‚’è¡¨ã™ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç”Ÿæˆã—ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã¯æŒã¡è¾¼ã¾ãªã„

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/package-app-domain.svg)

## app - domain é–“

- app ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å®Ÿç¾ã®ãŸã‚ã« domain ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã€æ¥­å‹™æ¦‚å¿µã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿æ›¸ãã™ã‚‹
- æ¥­å‹™çŸ¥è­˜ã¨ã—ã¦å–ã‚Šæ‰±ã†ã¹ãä¾‹å¤–ã‚’æ•æ‰ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«åæ˜ ã™ã‚‹

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§å¾—ã‚‰ã‚Œã‚‹æ©æµ

## &#x2705; èª¤ã£ãŸä¾å­˜ã‚„å®Ÿè£…ãŒé™çš„è§£æã®ãƒ¬ãƒ™ãƒ«ã§é˜²ãŒã‚Œã‚‹

- èª¤ã£ãŸä¾å­˜ã‚„å®Ÿè£…ãŒä»•çµ„ã¿ä¸Šã§ããªããªã‚Šã€PR ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è² æ‹…ã‚‚å°‘ãªã„

## &#x2705; å„ã‚¿ã‚¹ã‚¯ã«å¿…è¦ãªå®Ÿè£…ãŒæ˜ç¢ºã§é›†ä¸­ã§ãã‚‹

- å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™ã‚„ã€è¨±ã•ã‚Œã‚‹ä¾å­˜ãŒæ˜ç¢ºã§ã€å®Ÿè£…å†…å®¹ã«æ‚©ã¾ãªã„
- å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚‚å®¹æ˜“ã«æ›¸ã‘ã‚‹

## &#x2705; æ–°ãŸã«å‚ç”»ã—ãŸãƒ¡ãƒ³ãƒãƒ¼ãŒé–‹ç™ºã—ã‚„ã™ã„

- å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§å®Ÿè£…ã™ã¹ãå†…å®¹ã‚„ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ–¹æ³•ãŒãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã•ã‚Œã¦ã„ã‚‹
- Flutter ã«æ…£ã‚Œã¦ã„ãªã„ãƒ¡ãƒ³ãƒãƒ¼ã‚‚ã€domain ã‚„ repository å±¤ã®å®Ÿè£…ã¯ Dart ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦æ´»èºã§ãã‚‹

---

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§è¢«ã‚‹ä¸åˆ©ç›Šï¼Ÿ

## &#x1F914; build_runner ã‚’å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å®Ÿè¡Œã™ã‚‹ã®ãŒé¢å€’

- ä»•æ–¹ãªã—ã€‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚„ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ãªã©ã®å·¥å¤«ã‚’ï¼

## &#x1F914; åŒã˜æ©Ÿèƒ½ã«é–¢ã™ã‚‹å®Ÿè£…ãŒ Explorer ä¸Šã§é ãè¦‹ãˆã‚‹

- ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã®ä»•æ–¹ã‚’å·¥å¤«ã™ã‚‹ã¨ Explorer ä¸Šã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã™ã“ã¨ãŒãªããªã‚‹

## &#x1F914; å†—é•·ãªã‚³ãƒ¼ãƒ‰ãŒå¢—ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹

- ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®æ¦‚å¿µã€å‘½åã€ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã€HTTP ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã§å–ã‚Šæ‰±ã†æ¦‚å¿µã«å·®ãŒãªã„å ´åˆãªã©

## &#x1F914; é›£ã—ãã†ãƒ»ã†ã¾ãé‹ç”¨ã§ãã‚‹ã‹ä¸å®‰

- å˜ä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ§‹æˆã«æˆ»ã™ã®ã¯ç°¡å˜ï¼

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã“ã“ã¾ã§ã®ã¾ã¨ã‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/background-black.svg)

---

# ã“ã“ã¾ã§ã®ã¾ã¨ã‚

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§...

- &#x2705; ä¾å­˜ã«é–¢ã™ã‚‹èª¤ã£ãŸå®Ÿè£…ã‚’ä»•çµ„ã¿ä¸Šé˜²ãã“ã¨ãŒã§ãã‚‹
- &#x2705; å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™ãŒæ˜ç¢ºã«ãªã‚Šã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚‚å®¹æ˜“ã«æ›¸ã‘ã‚‹
- &#x2705; Result ç›¸å½“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã¨åˆã‚ã›ã¦ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è·¨ãä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã•ã‚Œã‚‹
- &#x2705; ã€Œã„ã¾è‡ªåˆ†ã¯ Flutter ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã®ã‹ã€Dart ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã®ã‹ã€ã®æ„è­˜ã‚’æ˜ç¢ºã«ã—ã¦é–‹ç™ºã§ãã‚‹
- &#x2705; ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã¨ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¢ãƒ—ãƒªã¨ã®å¢ƒç•ŒãŒæ˜ç¢ºã«ãªã‚Šã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®è² å‚µã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã«æŒã¡è¾¼ã¾ãªããªã‚‹

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã®æˆåŠŸã®ãŸã‚ã®æ›´ãªã‚‹è©¦ã¿

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã®æˆåŠŸã®ãŸã‚ã®æ›´ãªã‚‹è©¦ã¿

## &#x2705; ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

- domain ãŠã‚ˆã³ã€ãã‚Œã‚ˆã‚ŠæŠ½è±¡çš„ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 100%
- CI ã§ç¶™ç¶šçš„ã«ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’è¨ˆæ¸¬

## &#x2705; ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

- public_member_api_docs ã‚’å…¨é¢çš„ã«æœ‰åŠ¹åŒ–ã—ã¦ doc comment ã‚’ 100% è¨˜è¿°

## &#x2705; å®Ÿè£…ã®å¯èƒ½ãªé™ã‚Šã®ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–

- ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã¯ãã‚“ãªã«é›£ã—ããªã„ï¼
- ç”Ÿæˆ AI ã‚’æ´»ç”¨ã™ã‚‹è©¦ã¿

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®å¯¾è±¡

<img src="https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/test-scope.png" style="display: block; margin: auto;" alt="test-scope" width="75%"/>

<div style="font-size: 14px; color: #666; text-align: center; margin-top: 16px;">
å‡ºå…¸ï¼š<a href="https://logmi.jp/technology/329184" style="color: #666;">ã€Œè‡ªå‹•ãƒ†ã‚¹ãƒˆã®ç¨®é¡ã®æ›–æ˜§ã•ãŒå°‘ãªã„ã€Œãƒ†ã‚¹ãƒˆã‚µã‚¤ã‚ºã€ã¨ã„ã†åˆ†é¡ã€ï¼ˆãƒ­ã‚°ãƒŸãƒ¼Techï¼‰</a>
</div>

---

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

- matrix ã‚’çµ„ã‚“ã§å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ CI ã§ç¶™ç¶šçš„ã«å®Ÿè¡Œã™ã‚‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/ci-test.svg)

---

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

- æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯å±¤ãŠã‚ˆã³ãã‚Œã‚ˆã‚ŠæŠ½è±¡çš„ãªå±¤ã§ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ 100% ã§ã‚ã‚‹ã“ã¨ã‚’ PR ä¸Šã§ç¢ºèªã™ã‚‹

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/ci-coverage-report.svg)

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# public_member_api_docs

<!-- ![bg cover](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/public-member-api-docs.png) -->

<img src="https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/public-member-api-docs.png" alt="public_member_api_docs" width="100%"/>

---

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ

```dart
/// firebase_analytics ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæä¾›ã™ã‚‹ã€Firebase Analytics ã®å„æ©Ÿèƒ½ã‚’ãƒ©ãƒƒãƒ—ã—ãŸã‚¯ãƒ©ã‚¹ã€‚
///
/// ã»ã¨ã‚“ã© firebase_analytics ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å†å®Ÿè£…ã®ã‚ˆã†ãªå†…å®¹ã«ãªã£ã¦ã„ã‚‹ãŒã€
///
/// - system ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ãŒ firebase_analytics ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç›´æ¥ä¾å­˜ã—ãªã„ã‚ˆã†ã«ã™ã‚‹
/// - åˆ†æãƒ­ã‚°ã®é€ä¿¡ã¨ã„ã†æ€§è³ªä¸Šã€åˆ©ç”¨ã™ã‚‹å´ã« await ã•ã›ãšã€ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚‚ã•ã›ãªã„ï¼ˆä¾‹å¤–ãŒ
/// èµ·ãã¦ã‚‚å‘¼ã³å‡ºã—å´ã®å‡¦ç†ã‚’æ­¢ã‚ãªã„ï¼‰ã‚ˆã†ã«ã™ã‚‹
/// - ä¸€ç¨®ã®è…æ•—é˜²æ­¢å±¤ã¨ã—ã¦ã®å®Ÿè£…ã¨ã™ã‚‹
///
/// ã“ã¨ãªã©ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹ã€‚
class FirebaseAnalyticsClient {
  /// [FirebaseAnalyticsClient] ã‚’ç”Ÿæˆã™ã‚‹ã€‚
  const FirebaseAnalyticsClient(this._firebaseAnalytics);

  final FirebaseAnalytics _firebaseAnalytics;

  /// Firebase Analytics ã«ãƒ­ã‚°ã‚’é€ä¿¡ã™ã‚‹ã€‚
  ///
  /// æœ¬ãƒ¡ã‚½ãƒƒãƒ‰ã®è¿”ã‚Šå€¤å‹ã¯ `void` ã§å®šç¾©ã•ã‚Œã¦ãŠã‚Šã€[unawaited] ã§ [_logEvent] ã‚’å‘¼ã³
  /// å‡ºã™ã“ã¨ã§ã€ã‚‚ã—ä¾‹å¤–ãŒç™ºç”Ÿã—ã¦ã‚‚å‘¼ã³å‡ºã—å´ã®å‡¦ç†ã‚’æ­¢ã‚ãªã„ï¼ˆãŸã ã—ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼
  /// ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å®šç¾©ã™ã‚Œã°ã€ã‚­ãƒ£ãƒƒãƒã§ãã‚‹ï¼‰ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚
  void logEvent({required String name, required Map<String, Object>? parameters}) =>
      unawaited(_logEvent(name: name, parameters: parameters));

  /** çœç•¥ */
}
```

---

# doc comment ã‚’ 100% è¨˜è¿°

- public_member_api_docs ã® lint ãƒ«ãƒ¼ãƒ«ã‚’å…¨é¢çš„ã«æœ‰åŠ¹åŒ–
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ†å‰²ã¨åˆã‚ã›ã¦ã€ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‹ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã€æ„è­˜ã‚’é‡è¦–
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒã€Œå®Ÿè¡Œå¯èƒ½ãªä»•æ§˜æ›¸ã€ã¨ã—ã¦ã®ç†æƒ³ã«è¿‘ã¥ã

---

# å®Ÿè£…ã®å¯èƒ½ãªé™ã‚Šã®ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–

- repository
  - Dto ã®å®šç¾©ã¨ Repository ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…
- domain
  - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©ã¨ fromDto ã® factory ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
  - é–¢æ•°ã® riverpod ã®å®Ÿè£…
  - class ã® riverpod ã®å®Ÿè£…
  - UseCase ã®å®Ÿè£…
- ... ãªã©

## â†’ ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€doc comment ã‚‚å«ã‚ã¦ã™ã¹ã¦ã‚¹ãƒ‹ãƒšãƒƒãƒˆåŒ–ï¼

---

# ä¾‹ï¼šRepository ã®å®Ÿè£…

<video src="assets/snippet-repository.mp4" muted autoplay loop width="100%"></video>

---

# ä¾‹ï¼šRepository ã®ãƒ†ã‚¹ãƒˆ

<video src="assets/snippet-repository-test.mp4" muted autoplay loop width="100%"></video>

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# å®Ÿè£…ã®å¯èƒ½ãªé™ã‚Šã®ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# å®Ÿè£…ã®å¯èƒ½ãªé™ã‚Šã®ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–

- åˆè¨ˆç´„ 20 å€‹ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ `.code-snippets` ã¨ã—ã¦å…±æœ‰
- ãƒ•ã‚¡ã‚¤ãƒ«åãªã©ã®ä¸€éƒ¨ã‚’æ­£è¦è¡¨ç¾ã§æŠ½å‡ºã—ã¦ã€ä¸€éƒ¨å‹•çš„ãªå†…å®¹ã‚‚ç”Ÿæˆã§ãã‚‹
- å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å…¸å‹çš„ãªå®Ÿè£…ã™ã¹ã¦ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã—ã¦ã‚¹ãƒ‹ãƒšãƒƒãƒˆåŒ–
  - ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§å¯¾å¿œã§ããªã„å®Ÿè£…ãŒã‚ã‚Œã°ã€ä¸ç¢ºå®Ÿæ€§ã®é«˜ã„å¯¾è±¡ã¨ã—ã¦èªè­˜ã§ãã‚‹
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®è¨˜è¿°å¯¾è±¡ã¯ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã—ã¦ã‚¹ãƒ‹ãƒšãƒƒãƒˆåŒ–

---

# è©¦ã¿ï¼šç”Ÿæˆ AI ã®æ´»ç”¨

<video src="assets/ai-repository-test.mp4" muted autoplay loop width="100%"></video>

---

<!-- _class: lead -->

<style scoped>h1 { margin-top: 80px; }</style>

# ã¾ã¨ã‚

![bg](https://cdn.kosukesaigusa.com/flutter-kaigi-2024/assets/center-title-background.svg)

---

# ã¾ã¨ã‚

- &#x2705; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ†å‰²ã«ã‚ˆã‚‹å …ç‰¢ãªè¨­è¨ˆ
- &#x2705; ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¶™ç¶šçš„ãªè¨ˆæ¸¬ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹å“è³ªæ‹…ä¿
- &#x2705; ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¨ç”Ÿæˆ AI ã®æ´»ç”¨ã«ã‚ˆã‚‹é–‹ç™ºåŠ¹ç‡åŒ–
